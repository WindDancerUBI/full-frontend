---
sidebar_position: 2
tags: 
  - CSS
---

# 二、相对单位

## 1. 相对单位的好处

使用相对单位的好处有以下几点：

- 更好的可维护性：使用相对单位可以使网页元素的大小在不同的设备上更加一致，而不需要为每种设备尺寸创建不同的媒体查询。
- 更好的响应式设计：相对单位可以帮助网页元素在不同的设备上自适应，从而实现更好的响应式设计。
- 更适合移动设备：使用相对单位可以使网页在移动设备上更加友好，因为移动设备的屏幕尺寸较小，需要更小的元素。

常见的 CSS 相对单位有：em、rem、vh、vw、% 等。

## 2. em和rem

### 2.1 em的涵义

em是最常见的相对长度单位，适合基于特定的字号进行排版。在CSS中，当前元素的字号决定了em。例如当前字号为16px，则1em = 16px。

当设置padding、height、width、border-radius等属性时，使用em会很方便。这是因为当元素继承了不同的字号，或者用户改变了字体设置时，这些属性会跟着元素均匀地缩放。

![em.png](./img/em.png)

### 2.2 em定义字号

font-size属性时，em表现得不太一样。比如声明`font-size: 1.2em` 时，这个font-size是根据继承的字号来计算的。如果该元素的父元素的字号为16px，则该元素的字号为1.2em = 19.2px。

当em同时用于字号和其它属性时，浏览器必须先计算字号，然后再用这个计算值去算出其余的属性值。

### 2.3 rem的作用

em有一个不好之处：当元素使用em定义字体大小时，如果父元素也是使用em定义大小时，就会一直向上去计算。最后导致最终的结果不可控。为了解决字体相对大小，就需要使用rem了。

在文档中，根节点是所有其他元素的祖先节点。根节点有一个伪类选择器（:root），可以用来选中它自己。这等价于类型选择器html。

rem是root em的缩写。rem不是相对于当前元素，而是相对于根元素的单位。不管在文档的什么位置使用rem,1.2rem都会有相同的计算值。

### 2.4 使用原则

- 使用rem设置字号，保证字体大小的可控性；
- 使用px设置边框大小。
- 使用em设置其它大部分属性，尤其是边距和圆角。

## 3. 停止像素思维

### 3.1 设置一个合理的默认字号

不要将默认字体设置为10px然后再覆盖一遍，而应该直接将根元素字号设置为想要的值。

### 3.2 构造响应式面板

根据屏幕尺寸，用媒体查询改变根元素的字号，这样就能够基于不同用户的屏幕尺寸，渲染出不同大小的面板。

### 3.3 缩放单个组件

用em来设单独缩放一个组件性，让同一个组件在页面的某些部分显示不同的大小。比如为组件单独写一个类名，然后em来定义相关属性。

## 4. 视口的相对单位

是指相对于浏览器视口定义长度的视口的相对单位，视口的相对单位如下所示：

- vh：视口高度的1/100。
- vw：视口宽度的1/100。
- vmin：视口宽、高中较小的一方的1/100（IE9中叫vm，而不是vmin）。
- vmax：视口宽、高中较大的一方的1/100（本书写作时IE和Edge均不支持vmax）

视口相对长度非常适合展示一个填满屏幕的大图。

### 4.1 使用vw定义字号

不太建议，这样会导致字号随着视口大小线性变化。但最好的做法应该是让字体随着视口大小呈现阶梯状的变化。

### 4.2 使用calc定义字号

calc()函数内可以对两个及其以上的值进行基本运算。当要结合不同单位的值时，calc()特别实用。比如设置字号如下：

```css
:root {
	font-size: calc(0.5em + 1vw);
}
```

这段代码保证基础字号从iPhone 6里的11.75px一直过渡到1200px的浏览器窗口里的20px。基本实现了不用媒体查询的响应式策略

## 5. 无单位的数值和行高

有些属性允许无单位的值（即一个不指定单位的数）。支持这种值的属性包括line-height、z-index、font-weight（700等于bold,400等于normal，等等）。

任何长度单位（如px、em、rem）都可以用无单位的值0

使用无单位的数值时，继承的是声明值，即在每个继承子元素上会重新算它的计算值。可以用一个无单位的数值给body设置行高，之后就不用修改了，除非有些地方想要不一样的行高。

## 6. 自定义属性

这个规范给CSS引进了变量的概念，开启了一种全新的基于上下文的动态样式。你可以声明一个变量，为它赋一个值，然后在样式表的其他地方引用这个值。

示例代码如下：

```css
:root {
  --main-font: Helvetica, Arial, sans-serif;
}

p {
  font-family: var(--main-font);
}
```

变量必须在一个声明块内声明。如使用了：root选择器，则该变量可以在整个网页使用。

变量声明本身什么也没做，我们使用时才能看到效果。

调用函数var()就能使用该变量。